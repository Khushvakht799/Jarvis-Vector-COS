<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Jarvis Cognitive OS</title>
    <style>
        body {
            margin: 0;
            padding: 20px;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%);
            color: white;
            min-height: 100vh;
        }
        
        .container {
            max-width: 1000px;
            margin: 0 auto;
        }
        
        header {
            text-align: center;
            margin-bottom: 30px;
        }
        
        h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
        }
        
        .status-bar {
            background: rgba(255, 255, 255, 0.1);
            padding: 15px;
            border-radius: 10px;
            margin-bottom: 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .modules-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }
        
        .module-card {
            background: rgba(255, 255, 255, 0.1);
            padding: 25px;
            border-radius: 15px;
            cursor: pointer;
            transition: all 0.3s ease;
            border: 2px solid transparent;
        }
        
        .module-card:hover {
            background: rgba(255, 255, 255, 0.2);
            border-color: rgba(255, 255, 255, 0.3);
            transform: translateY(-5px);
        }
        
        .module-card.running {
            border-color: #4CAF50;
            background: rgba(76, 175, 80, 0.2);
        }
        
        .module-icon {
            font-size: 2em;
            margin-bottom: 15px;
        }
        
        .module-title {
            font-size: 1.3em;
            margin-bottom: 10px;
            font-weight: bold;
        }
        
        .module-desc {
            font-size: 0.9em;
            opacity: 0.8;
            margin-bottom: 15px;
        }
        
        .module-status {
            font-size: 0.8em;
            padding: 5px 10px;
            background: rgba(255, 255, 255, 0.2);
            border-radius: 15px;
            display: inline-block;
        }
        
        .log-container {
            background: rgba(0, 0, 0, 0.3);
            padding: 15px;
            border-radius: 10px;
            height: 150px;
            overflow-y: auto;
            font-family: 'Courier New', monospace;
            font-size: 0.9em;
        }
        
        .log-entry {
            margin-bottom: 5px;
            padding: 5px;
            border-left: 3px solid #4CAF50;
        }
        
        .log-entry.error {
            border-left-color: #f44336;
        }
        
        .log-entry.warning {
            border-left-color: #ff9800;
        }
        
        .controls {
            display: flex;
            gap: 10px;
            margin-top: 20px;
        }
        
        button {
            padding: 10px 20px;
            border: none;
            border-radius: 5px;
            background: #4CAF50;
            color: white;
            cursor: pointer;
            transition: background 0.3s ease;
        }
        
        button:hover {
            background: #45a049;
        }
        
        button.stop {
            background: #f44336;
        }
        
        button.stop:hover {
            background: #da190b;
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>ü§ñ Jarvis Cognitive OS</h1>
            <p>Unified Launcher Interface</p>
        </header>
        
        <div class="status-bar">
            <div id="systemStatus">System: Ready</div>
            <div id="activeModules">Active Modules: 0</div>
            <div id="timestamp" id="timestamp"></div>
        </div>
        
        <div class="modules-grid">
            <div class="module-card" onclick="launchModule('voice')" id="voice-module">
                <div class="module-icon">üé§</div>
                <div class="module-title">Voice Assistant</div>
                <div class="module-desc">Speech recognition and synthesis</div>
                <div class="module-status" id="voice-status">Stopped</div>
                <div class="controls">
                    <button onclick="event.stopPropagation(); startModule('voice')">Start</button>
                    <button class="stop" onclick="event.stopPropagation(); stopModule('voice')">Stop</button>
                </div>
            </div>
            
            <div class="module-card" onclick="launchModule('vision')" id="vision-module">
                <div class="module-icon">üëÅÔ∏è</div>
                <div class="module-title">Computer Vision</div>
                <div class="module-desc">Object detection and image analysis</div>
                <div class="module-status" id="vision-status">Stopped</div>
                <div class="controls">
                    <button onclick="event.stopPropagation(); startModule('vision')">Start</button>
                    <button class="stop" onclick="event.stopPropagation(); stopModule('vision')">Stop</button>
                </div>
            </div>
            
            <div class="module-card" onclick="launchModule('memory')" id="memory-module">
                <div class="module-icon">üß†</div>
                <div class="module-title">Memory System</div>
                <div class="module-desc">Knowledge base and context management</div>
                <div class="module-status" id="memory-status">Stopped</div>
                <div class="controls">
                    <button onclick="event.stopPropagation(); startModule('memory')">Start</button>
                    <button class="stop" onclick="event.stopPropagation(); stopModule('memory')">Stop</button>
                </div>
            </div>
            
            <div class="module-card" onclick="launchModule('vector')" id="vector-module">
                <div class="module-icon">ü§ñ</div>
                <div class="module-title">Vector AI</div>
                <div class="module-desc">Anki Vector robot control</div>
                <div class="module-status" id="vector-status">Stopped</div>
                <div class="controls">
                    <button onclick="event.stopPropagation(); startModule('vector')">Start</button>
                    <button class="stop" onclick="event.stopPropagation(); stopModule('vector')">Stop</button>
                </div>
            </div>
        </div>
        
        <h3>System Log</h3>
        <div class="log-container" id="logContainer">
            <div class="log-entry">System initialized at <span id="initTime"></span></div>
        </div>
        
        <div style="text-align: center; margin-top: 20px;">
            <button onclick="startAllModules()">Start All Modules</button>
            <button class="stop" onclick="stopAllModules()">Stop All Modules</button>
            <button onclick="clearLog()">Clear Log</button>
        </div>
    </div>

    <script>
        const { spawn, exec } = require('child_process');
        const path = require('path');
        
        let activeModules = new Set();
        const moduleProcesses = new Map();
        
        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
        document.getElementById('initTime').textContent = new Date().toLocaleTimeString();
        updateActiveModules();
        
        function addLog(message, type = 'info') {
            const logContainer = document.getElementById('logContainer');
            const logEntry = document.createElement('div');
            logEntry.className = `log-entry ${type}`;
            logEntry.textContent = `[${new Date().toLocaleTimeString()}] ${message}`;
            logContainer.appendChild(logEntry);
            logContainer.scrollTop = logContainer.scrollHeight;
        }
        
        function updateModuleStatus(module, status) {
            const statusElement = document.getElementById(`${module}-status`);
            const moduleElement = document.getElementById(`${module}-module`);
            
            if (status === 'running') {
                statusElement.textContent = 'Running';
                moduleElement.classList.add('running');
                activeModules.add(module);
            } else {
                statusElement.textContent = 'Stopped';
                moduleElement.classList.remove('running');
                activeModules.delete(module);
            }
            
            updateActiveModules();
        }
        
        function updateActiveModules() {
            document.getElementById('activeModules').textContent = 
                `Active Modules: ${activeModules.size}`;
                
            if (activeModules.size > 0) {
                document.getElementById('systemStatus').textContent = 'System: Running';
            } else {
                document.getElementById('systemStatus').textContent = 'System: Ready';
            }
        }
        
        function startModule(module) {
			if (activeModules.has(module)) {
				addLog(`${module} is already running`, 'warning');
				return;
			}
			
			addLog(`Starting ${module} module...`);
			
			// –†–ï–ê–õ–¨–ù–´–ï –∫–æ–º–∞–Ω–¥—ã –∑–∞–ø—É—Å–∫–∞ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –º–æ–¥—É–ª—è
			const commands = {
				voice: 'cd ../voice-assistant && npm start',
				vision: 'cd ../computer-vision && python main.py',
				memory: 'cd ../memory-system && node index.js',
				vector: 'cd ../vector-interface && python bot.py'
			};
			
			// –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏–µ –∫–æ–º–∞–Ω–¥—ã –¥–ª—è –º–æ–¥—É–ª—è
			if (!commands[module]) {
				addLog(`ERROR: No command defined for ${module} module`, 'error');
				return;
			}
			
			try {
				// –ó–ê–ü–£–°–ö–ê–ï–ú —Ä–µ–∞–ª—å–Ω—ã–π –ø—Ä–æ—Ü–µ—Å—Å
				const process = spawn(commands[module], { 
					shell: true,
					stdio: 'pipe'
				});
				
				moduleProcesses.set(module, process);
				
				process.stdout.on('data', (data) => {
					addLog(`${module}: ${data.toString().trim()}`);
				});
				
				process.stderr.on('data', (data) => {
					addLog(`${module} ERROR: ${data.toString().trim()}`, 'error');
				});
				
				process.on('close', (code) => {
					addLog(`${module} process exited with code ${code}`);
					updateModuleStatus(module, 'stopped');
					moduleProcesses.delete(module);
				});
				
				process.on('error', (err) => {
					addLog(`${module} failed to start: ${err.message}`, 'error');
					updateModuleStatus(module, 'stopped');
				});
				
				// –ï—Å–ª–∏ –ø—Ä–æ—Ü–µ—Å—Å –∑–∞–ø—É—Å—Ç–∏–ª—Å—è —É—Å–ø–µ—à–Ω–æ
				setTimeout(() => {
					if (process.pid) {
						updateModuleStatus(module, 'running');
						addLog(`${module} module started successfully (PID: ${process.pid})`);
					}
				}, 2000);
				
			} catch (error) {
				addLog(`Failed to start ${module}: ${error.message}`, 'error');
			}
		}
        
        function stopModule(module) {
            if (!activeModules.has(module)) {
                addLog(`${module} is not running`, 'warning');
                return;
            }
            
            addLog(`Stopping ${module} module...`);
            
            // –†–µ–∞–ª—å–Ω–∞—è –æ—Å—Ç–∞–Ω–æ–≤–∫–∞ –ø—Ä–æ—Ü–µ—Å—Å–∞
            if (moduleProcesses.has(module)) {
                moduleProcesses.get(module).kill();
                moduleProcesses.delete(module);
            }
            
            updateModuleStatus(module, 'stopped');
            addLog(`${module} module stopped`);
        }
        
        function launchModule(module) {
            addLog(`Launching ${module} interface...`);
            // –ó–¥–µ—Å—å –º–æ–∂–Ω–æ –æ—Ç–∫—Ä—ã—Ç—å –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –æ–∫–Ω–∞ –∏–ª–∏ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã
        }
        
        function startAllModules() {
            addLog('Starting all modules...');
            ['voice', 'vision', 'memory', 'vector'].forEach(module => {
                if (!activeModules.has(module)) {
                    startModule(module);
                }
            });
        }
        
        function stopAllModules() {
            addLog('Stopping all modules...');
            [...activeModules].forEach(module => {
                stopModule(module);
            });
        }
        
        function clearLog() {
            document.getElementById('logContainer').innerHTML = 
                '<div class="log-entry">Log cleared at ' + new Date().toLocaleTimeString() + '</div>';
        }
        
        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –≤—Ä–µ–º–µ–Ω–∏
        setInterval(() => {
            document.getElementById('timestamp').textContent = 
                new Date().toLocaleTimeString();
        }, 1000);
    </script>
</body>
</html>